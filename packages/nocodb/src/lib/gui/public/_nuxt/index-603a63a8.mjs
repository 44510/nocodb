import { a as __nuxt_component_0, _ as __unplugin_components_0 } from "./file-copy-outline-caf79cf0.mjs";
import { u as useUIPermission } from "./index-03dd499c.mjs";
import { o as openBlock, c as createElementBlock, b as createBaseVNode, _ as _export_sfc, d as defineComponent, r as ref, bT as useDropZone, bR as useFileDialog, a9 as useProject, u as useNuxtApp, w as watch, g as createVNode, h as withCtx, A as normalizeClass, I as message, y as createTextVNode, F as Fragment, k as createCommentVNode, x as withModifiers } from "./entry-fe2e349d.mjs";
import { u as useDialog } from "./index-a7f6bc26.mjs";
import { D as DlgQuickImport } from "./QuickImport-adfa0418.mjs";
import { D as DlgTableCreate } from "./TableCreate-1cd23020.mjs";
import "./index-e4541ed7.mjs";
import { B as Button } from "./button-85170489.mjs";
import "./useTabs-9007d20c.mjs";
import "./Modal-6ec32f67.mjs";
import "./omit-bb2337ec.mjs";
import "./pickAttrs-251338d2.mjs";
import "./plus-0f42eb0d.mjs";
import "./delete-outline-809194cc.mjs";
import "./index-c79a04bb.mjs";
import "./index-752e3e2c.mjs";
import "./index-e208122b.mjs";
import "./index-b5c7d9eb.mjs";
import "./LeftOutlined-b3330d93.mjs";
import "./RightOutlined-593486a9.mjs";
import "./index-80dcfdcf.mjs";
import "./antInputDirective-04640d14.mjs";
import "./useState-b38ec006.mjs";
import "./SearchOutlined-a319fe5d.mjs";
import "./Checkbox-fdabe561.mjs";
import "./index-aa513677.mjs";
import "./dropdown-2e9bbb3f.mjs";
import "./Dropdown-d7fe3574.mjs";
import "./index-6cc9109e.mjs";
import "./Input-a826c0f4.mjs";
import "./TextArea-19a941ff.mjs";
import "./Password-2bc07ccd.mjs";
import "./CollapsePanel-4933ec03.mjs";
import "./index-3d03647a.mjs";
import "./Card-6955c823.mjs";
import "./index-d5212021.mjs";
import "./TabPane-95cc1419.mjs";
import "./minus-circle-outline-a8e6550b.mjs";
import "./deepCompare-c3a57270.mjs";
import "./index-a0f8494e.mjs";
import "./wave-51bede47.mjs";
const _hoisted_1$3 = {
  class: "nc-icon",
  preserveAspectRatio: "xMidYMid meet",
  viewBox: "0 0 16 16",
  width: "1.2em",
  height: "1.2em"
};
const _hoisted_2$3 = /* @__PURE__ */ createBaseVNode("path", {
  fill: "currentColor",
  "fill-rule": "evenodd",
  d: "M14 4.5V11h-1V4.5h-2A1.5 1.5 0 0 1 9.5 3V1H4a1 1 0 0 0-1 1v9H2V2a2 2 0 0 1 2-2h5.5L14 4.5ZM7.86 14.841a1.13 1.13 0 0 0 .401.823c.13.108.29.192.479.252c.19.061.411.091.665.091c.338 0 .624-.053.858-.158c.237-.105.416-.252.54-.44a1.17 1.17 0 0 0 .187-.656c0-.224-.045-.41-.135-.56a1.002 1.002 0 0 0-.375-.357a2.028 2.028 0 0 0-.565-.21l-.621-.144a.97.97 0 0 1-.405-.176a.37.37 0 0 1-.143-.299c0-.156.061-.284.184-.384c.125-.101.296-.152.513-.152c.143 0 .266.023.37.068a.624.624 0 0 1 .245.181a.56.56 0 0 1 .12.258h.75a1.093 1.093 0 0 0-.199-.566a1.21 1.21 0 0 0-.5-.41a1.813 1.813 0 0 0-.78-.152c-.293 0-.552.05-.777.15c-.224.099-.4.24-.527.421c-.127.182-.19.395-.19.639c0 .201.04.376.123.524c.082.149.199.27.351.367c.153.095.332.167.54.213l.618.144c.207.049.36.113.462.193a.387.387 0 0 1 .153.326a.512.512 0 0 1-.085.29a.558.558 0 0 1-.255.193c-.111.047-.25.07-.413.07c-.117 0-.224-.013-.32-.04a.837.837 0 0 1-.249-.115a.578.578 0 0 1-.255-.384h-.764Zm-3.726-2.909h.893l-1.274 2.007l1.254 1.992h-.908l-.85-1.415h-.035l-.853 1.415H1.5l1.24-2.016l-1.228-1.983h.931l.832 1.438h.036l.823-1.438Zm1.923 3.325h1.697v.674H5.266v-3.999h.791v3.325Zm7.636-3.325h.893l-1.274 2.007l1.254 1.992h-.908l-.85-1.415h-.035l-.853 1.415h-.861l1.24-2.016l-1.228-1.983h.931l.832 1.438h.036l.823-1.438Z"
}, null, -1);
const _hoisted_3$3 = [
  _hoisted_2$3
];
function render$2(_ctx, _cache) {
  return openBlock(), createElementBlock("svg", _hoisted_1$3, _hoisted_3$3);
}
var __unplugin_components_3 = { name: "bi-filetype-xlsx", render: render$2 };
const _hoisted_1$2 = {
  class: "nc-icon",
  preserveAspectRatio: "xMidYMid meet",
  viewBox: "0 0 16 16",
  width: "1.2em",
  height: "1.2em"
};
const _hoisted_2$2 = /* @__PURE__ */ createBaseVNode("path", {
  fill: "currentColor",
  "fill-rule": "evenodd",
  d: "M14 4.5V11h-1V4.5h-2A1.5 1.5 0 0 1 9.5 3V1H4a1 1 0 0 0-1 1v9H2V2a2 2 0 0 1 2-2h5.5L14 4.5ZM4.151 15.29a1.176 1.176 0 0 1-.111-.449h.764a.578.578 0 0 0 .255.384c.07.049.154.087.25.114c.095.028.201.041.319.041c.164 0 .301-.023.413-.07a.559.559 0 0 0 .255-.193a.507.507 0 0 0 .084-.29a.387.387 0 0 0-.152-.326c-.101-.08-.256-.144-.463-.193l-.618-.143a1.72 1.72 0 0 1-.539-.214a1.001 1.001 0 0 1-.352-.367a1.068 1.068 0 0 1-.123-.524c0-.244.064-.457.19-.639c.128-.181.304-.322.528-.422c.225-.1.484-.149.777-.149c.304 0 .564.05.779.152c.217.102.384.239.5.41c.12.17.186.359.2.566h-.75a.56.56 0 0 0-.12-.258a.624.624 0 0 0-.246-.181a.923.923 0 0 0-.37-.068c-.216 0-.387.05-.512.152a.472.472 0 0 0-.185.384c0 .121.048.22.144.3a.97.97 0 0 0 .404.175l.621.143c.217.05.406.12.566.211a1 1 0 0 1 .375.358c.09.148.135.335.135.56c0 .247-.063.466-.188.656a1.216 1.216 0 0 1-.539.439c-.234.105-.52.158-.858.158c-.254 0-.476-.03-.665-.09a1.404 1.404 0 0 1-.478-.252a1.13 1.13 0 0 1-.29-.375Zm-3.104-.033a1.32 1.32 0 0 1-.082-.466h.764a.576.576 0 0 0 .074.27a.499.499 0 0 0 .454.246c.19 0 .33-.055.422-.164c.091-.11.137-.265.137-.466v-2.745h.791v2.725c0 .44-.119.774-.357 1.005c-.237.23-.565.345-.985.345a1.59 1.59 0 0 1-.568-.094a1.145 1.145 0 0 1-.407-.266a1.14 1.14 0 0 1-.243-.39Zm9.091-1.585v.522c0 .256-.039.47-.117.641a.862.862 0 0 1-.322.387a.877.877 0 0 1-.47.126a.883.883 0 0 1-.47-.126a.87.87 0 0 1-.32-.387a1.55 1.55 0 0 1-.117-.641v-.522c0-.258.039-.471.117-.641a.87.87 0 0 1 .32-.387a.868.868 0 0 1 .47-.129c.177 0 .333.043.47.129a.862.862 0 0 1 .322.387c.078.17.117.383.117.641Zm.803.519v-.513c0-.377-.069-.701-.205-.973a1.46 1.46 0 0 0-.59-.63c-.253-.146-.559-.22-.916-.22c-.356 0-.662.074-.92.22a1.441 1.441 0 0 0-.589.628c-.137.271-.205.596-.205.975v.513c0 .375.068.699.205.973c.137.271.333.48.589.626c.258.145.564.217.92.217c.357 0 .663-.072.917-.217c.256-.146.452-.355.589-.626c.136-.274.205-.598.205-.973Zm1.29-.935v2.675h-.746v-3.999h.662l1.752 2.66h.032v-2.66h.75v4h-.656l-1.761-2.676h-.032Z"
}, null, -1);
const _hoisted_3$2 = [
  _hoisted_2$2
];
function render$1(_ctx, _cache) {
  return openBlock(), createElementBlock("svg", _hoisted_1$2, _hoisted_3$2);
}
var __unplugin_components_2 = { name: "bi-filetype-json", render: render$1 };
const _hoisted_1$1 = {
  class: "nc-icon",
  preserveAspectRatio: "xMidYMid meet",
  viewBox: "0 0 256 256",
  width: "1.2em",
  height: "1.2em"
};
const _hoisted_2$1 = /* @__PURE__ */ createBaseVNode("path", {
  fill: "currentColor",
  d: "m219.4 171.1l-20 48a8 8 0 0 1-14.8 0l-20-48a8 8 0 1 1 14.8-6.2l12.6 30.3l12.6-30.3a8 8 0 1 1 14.8 6.2ZM66 176a12.9 12.9 0 0 1 8.6 3.4a7.9 7.9 0 0 0 11.3-.6a8 8 0 0 0-.5-11.3A29.3 29.3 0 0 0 66 160c-16.5 0-30 14.4-30 32s13.5 32 30 32a29.3 29.3 0 0 0 19.4-7.5a8 8 0 0 0 .5-11.3a7.9 7.9 0 0 0-11.3-.6A12.9 12.9 0 0 1 66 208c-7.7 0-14-7.2-14-16s6.3-16 14-16Zm134-80h-48a8 8 0 0 1-8-8V40H56v88a8 8 0 0 1-16 0V40a16 16 0 0 1 16-16h96a8.1 8.1 0 0 1 5.7 2.3l55.9 56A7.8 7.8 0 0 1 216 88v40a8 8 0 0 1-16 0Zm-40-16h28.7L160 51.3Zm-30.3 103.8c-3.1-.8-8.6-2.3-9.7-3.6v-.2c0-3.3 2.4-5 7-5a18.4 18.4 0 0 1 10 3.2h-.1a8.3 8.3 0 0 0 5.1 1.8a8 8 0 0 0 8-8a7.6 7.6 0 0 0-2.9-6.1A33.4 33.4 0 0 0 127 159c-13.5 0-23 8.6-23 21s13 17 21.6 19.3c3.4.9 7 1.8 9.2 3.1s1.2 1 1.2 1.6s0 5-9 5a18.4 18.4 0 0 1-10-3.2h.1a8.3 8.3 0 0 0-5.1-1.8a8 8 0 0 0-8 8a7.6 7.6 0 0 0 2.9 6.1A33.4 33.4 0 0 0 127 225c15.6 0 25-7.9 25-21s-14-18-22.3-20.2Z"
}, null, -1);
const _hoisted_3$1 = [
  _hoisted_2$1
];
function render(_ctx, _cache) {
  return openBlock(), createElementBlock("svg", _hoisted_1$1, _hoisted_3$1);
}
var __unplugin_components_1 = { name: "ph-file-csv", render };
const _sfc_main = /* @__PURE__ */ defineComponent({
  __name: "index",
  setup(__props, { expose }) {
    expose();
    const dropZone = ref();
    const { isOverDropZone } = useDropZone(dropZone, onDrop);
    const { files, open, reset } = useFileDialog();
    const { isSharedBase } = useProject();
    const { isUIAllowed } = useUIPermission();
    const { $e } = useNuxtApp();
    const allowedQuickImportTypes = [
      ".xls, .xlsx, .xlsm, .ods, .ots",
      ".csv",
      ".json"
    ];
    watch(files, (nextFiles) => nextFiles && onFileSelect(nextFiles), { flush: "post" });
    function onFileSelect(fileList) {
      if (!fileList)
        return;
      const files2 = Array.from(fileList).map((file) => file);
      onDrop(files2);
    }
    function onDrop(droppedFiles) {
      if (!droppedFiles)
        return;
      if (droppedFiles.length > 1) {
        return message.error({
          content: `Only one file can be imported at a time.`,
          duration: 2
        });
      }
      let fileType = null;
      const isValid = allowedQuickImportTypes.some((type) => {
        const isAllowed = droppedFiles[0].type.replace("/", ".").endsWith(type);
        if (isAllowed) {
          fileType = type.replace(".", "");
        }
        return isAllowed;
      });
      if (!isValid) {
        return message.error({
          content: "Invalid file type",
          duration: 2
        });
      }
      if (fileType && isValid) {
        openQuickImportDialog(fileType, droppedFiles[0]);
      }
    }
    function openQuickImportDialog(type, file) {
      var _a, _b, _c;
      $e(`a:actions:import-${type}`);
      const isOpen = ref(true);
      const { close, vNode } = useDialog(DlgQuickImport, {
        "modelValue": isOpen,
        "importType": type,
        "onUpdate:modelValue": closeDialog
      });
      (_c = (_b = (_a = vNode.value) == null ? void 0 : _a.component) == null ? void 0 : _b.exposed) == null ? void 0 : _c.handleChange({
        file: {
          uid: `${type}-${file.name}-${Math.random().toString(36).substring(2)}`,
          name: file.name,
          type: file.type,
          status: "done",
          fileName: file.name,
          lastModified: file.lastModified,
          size: file.size,
          originFileObj: file
        },
        event: { percent: 100 }
      });
      function closeDialog() {
        isOpen.value = false;
        close(1e3);
        reset();
      }
    }
    function openCreateTable() {
      $e("a:table:open");
      const isOpen = ref(true);
      const { close } = useDialog(DlgTableCreate, {
        "modelValue": isOpen,
        "onUpdate:modelValue": closeDialog
      });
      function closeDialog() {
        isOpen.value = false;
        close(1e3);
        reset();
      }
    }
    function onDropZoneClick(e) {
      const elements = document.elementsFromPoint(e.clientX, e.clientY);
      const isCreateTableBtnClicked = elements.some((element) => element.classList.contains("create-table-btn"));
      if (isCreateTableBtnClicked) {
        openCreateTable();
        return;
      }
      open();
    }
    const __returned__ = { dropZone, isOverDropZone, files, open, reset, isSharedBase, isUIAllowed, $e, allowedQuickImportTypes, onFileSelect, onDrop, openQuickImportDialog, openCreateTable, onDropZoneClick };
    Object.defineProperty(__returned__, "__isScriptSetup", { enumerable: false, value: true });
    return __returned__;
  }
});
const _hoisted_1 = { class: "h-full w-full text-gray-600 flex items-center justify-center relative" };
const _hoisted_2 = {
  key: 0,
  class: "flex flex-col gap-6 items-center justify-center mx-auto text-center text-gray-500 border-gray-300 border-1 w-3/5 h-1/2 rounded-md"
};
const _hoisted_3 = /* @__PURE__ */ createBaseVNode("div", { class: "text-3xl" }, "Welcome to NocoDB!", -1);
const _hoisted_4 = /* @__PURE__ */ createBaseVNode("div", { class: "prose-lg leading-8" }, "To get started, click on a table in the left pane", -1);
const _hoisted_5 = [
  _hoisted_3,
  _hoisted_4
];
const _hoisted_6 = {
  key: 1,
  ref: "dropZone"
};
const _hoisted_7 = /* @__PURE__ */ createTextVNode(" Drop here ");
const _hoisted_8 = { class: "flex flex-col gap-6 items-center justify-center md:w-1/2 mx-auto text-center" };
const _hoisted_9 = /* @__PURE__ */ createBaseVNode("div", { class: "text-3xl" }, "Welcome to NocoDB!", -1);
const _hoisted_10 = { class: "flex items-center flex-wrap justify-center gap-2 prose-lg leading-8" };
const _hoisted_11 = /* @__PURE__ */ createTextVNode(" To get started, either drop a ");
const _hoisted_12 = { class: "flex items-center gap-2" };
const _hoisted_13 = /* @__PURE__ */ createTextVNode(" CSV,");
const _hoisted_14 = { class: "flex items-center gap-2" };
const _hoisted_15 = /* @__PURE__ */ createTextVNode(" JSON");
const _hoisted_16 = /* @__PURE__ */ createTextVNode(" or ");
const _hoisted_17 = { class: "flex items-center gap-2" };
const _hoisted_18 = /* @__PURE__ */ createTextVNode(" Excel file here or");
const _hoisted_19 = ["onClick"];
function _sfc_render(_ctx, _cache, $props, $setup, $data, $options) {
  const _component_MaterialSymbolsFileCopyOutline = __unplugin_components_0;
  const _component_general_overlay = __nuxt_component_0;
  const _component_PhFileCsv = __unplugin_components_1;
  const _component_BiFiletypeJson = __unplugin_components_2;
  const _component_BiFiletypeXlsx = __unplugin_components_3;
  const _component_a_button = Button;
  return openBlock(), createElementBlock("div", _hoisted_1, [
    $setup.isSharedBase || !$setup.isUIAllowed("dataInsert") ? (openBlock(), createElementBlock("div", _hoisted_2, _hoisted_5)) : (openBlock(), createElementBlock("div", _hoisted_6, [
      createVNode(_component_general_overlay, {
        "model-value": true,
        class: normalizeClass([[$setup.isOverDropZone ? "bg-gray-300/75 border-primary shadow" : "bg-gray-100/25 border-gray-500 cursor-pointer"], "text-3xl flex items-center justify-center gap-2 border-1 border-dashed rounded hover:border-primary"]),
        inline: "",
        style: { "top": "20%", "left": "20%", "right": "20%", "bottom": "20%" },
        onClick: $setup.onDropZoneClick
      }, {
        default: withCtx(() => [
          $setup.isOverDropZone ? (openBlock(), createElementBlock(Fragment, { key: 0 }, [
            createVNode(_component_MaterialSymbolsFileCopyOutline, { class: "text-accent" }),
            _hoisted_7
          ], 64)) : createCommentVNode("", true)
        ]),
        _: 1
      }, 8, ["class"]),
      createBaseVNode("div", _hoisted_8, [
        _hoisted_9,
        createBaseVNode("div", _hoisted_10, [
          _hoisted_11,
          createBaseVNode("span", _hoisted_12, [
            createVNode(_component_PhFileCsv),
            _hoisted_13
          ]),
          createBaseVNode("span", _hoisted_14, [
            createVNode(_component_BiFiletypeJson),
            _hoisted_15
          ]),
          _hoisted_16,
          createBaseVNode("span", _hoisted_17, [
            createVNode(_component_BiFiletypeXlsx),
            _hoisted_18
          ])
        ]),
        createVNode(_component_a_button, {
          type: "primary",
          ghost: "",
          class: "create-table-btn"
        }, {
          default: withCtx(() => [
            createBaseVNode("span", {
              class: "prose text-[1rem] text-primary z-50",
              onClick: withModifiers($setup.openCreateTable, ["stop"])
            }, "Create new table", 8, _hoisted_19)
          ]),
          _: 1
        })
      ])
    ], 512))
  ]);
}
var index = /* @__PURE__ */ _export_sfc(_sfc_main, [["render", _sfc_render]]);
export { index as default };
